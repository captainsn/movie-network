function submitUser(){var a={};return form.email.value&&(a.email=form.email.value),form.password.value&&(a.password=form.password.value),a.email?a.password?a.password!==form.confirm.value?displayError("Passwords do not match"):void fetch("/register",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)}).then(submitSuccess).catch(submitError):displayError("Must provide password"):displayError("Must provide email")}function submitLogin(){var a={email:form.email.value,password:form.password.value};fetch("/login",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)}).then(function(a){a.ok||alert("ERROR"),a.json().then(function(a){alert(JSON.stringify(a)),localStorage.token=a.token,window.location.href="/account"})}).catch(submitError)}function clearForm(){form.reset(),clearError("message");for(var a=document.getElementsByClassName("hidden"),b=0;b<a.length;b++)a[b].style.display=""}function clearError(a){if("message"===a)return document.getElementById("js-error-message").style.visibility="hidden";a.style.border="1px solid #888"}function submitSuccess(a){if(!a.ok)return submitError(a);document.getElementById("js-success").style.display="block",clearForm()}function submitError(a,b){return a.status>=400&&a.status<500?a.text().then(function(a){displayError(a)}):b?displayError(b):void 0}function displayError(a){var b=document.getElementById("js-error-message");b.innerHTML=a,b.style.visibility="visible"}const form=document.forms[0];